<!DOCType html>
<html>

<head>
    <script src="https://code.jquery.com/jquery-1.12.4.js"></script>
    <script>
        /*
                                                                                                                                			Many actions in Javascript are asynchronous.
                                                                                                                                			One of the solution if you want some code to be executed 
                                                                                                                                			only after an async. func. is callback functions.

                                                                                                                                			A callback function is a function passed into another function 
                                                                                                                                			as an argument, which is then invoked inside the outer function 
                                                                                                                                			to complete some kind of routine or action.
                                                                                                                                			*/

        //lecture Demo, to be removed 
        function scheduledMsg(msg, timeInSec, callback) {
            setTimeout(() => {
                console.log(msg);
                callback();
            }, timeInSec * 1000);
        }

        scheduledMsg("Welcome to our demo...", 3, () => {
            console.log("Task finished, Bye...");
        });
        //console.log("Task finished, Bye...");

        //////////////////////////////////////////////////////
        //Create our own callback function
        //Back to the problem here:
        //problem:
        //debugger;
        function timedMessage0(msg) {
            console.log("Message before setTimout...");
            setTimeout(function() {
                console.log(`In setTimeout:${msg}`);
            }, 2000);
        };

        /*	console.log("setTimeout without callback function"); 
        	timedMessage0("This is our message");
        	console.log("This should be after setTimeout");*/


        //Solution:
        //We can solve it using callback function:
        //console.log("----------------------------------"); 


        function timedMessage(msg, callback) {
            console.log("Message before setTimout...");
            setTimeout(function() {
                console.log("In setTimeout...");
                console.log(msg);
                callback();
            }, 5000);
        }
        //exec the func.
        // console.log("///////////setTimeout with callback function///////////");

        // timedMessage("Hello",function(){
        // 	console.log("text inside callback...");
        // });
        // console.log("text out of callback");


        //timedMessage("Hello");
        //console.log("this should be after setTimeout...");


        /*
			“Callback Hell” Problem And Solution:
			In asynchronous code execution, which is simply execution of 
			code in any order, sometimes it is common to have numerous levels 
			of callback functions to the extent that you have code that looks like 
			the following. The messy code below is called callback hell because of
			the difficulty of following the code due to the many callbacks. 
			
			Here are two solutions to this problem:
    		1-Name your functions and declare them and pass just the name of 
			the function as the callback, instead of defining an anonymous 
			function in the parameter of the main function.
    		2-Modularity: Separate your code into modules, so you can export 
			a section of code that does a particular job. 
			Then you can import that module into your larger application.
			*/
        //More: 
        //https://developer.mozilla.org/en-US/docs/Glossary/Callback_function
        //http://javascriptissexy.com/understand-javascript-callback-functions-and-use-them/
    </script>

    <head>

        <body>
            Callback Functions
            <br>
            <button onclick="getProduct()">Get Product</button>
        </body>

</html>